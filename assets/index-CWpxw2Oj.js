(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})(),((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports))((()=>{var e=(e,t)=>()=>(e&&(t=e(e=0)),t),t=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function n(e,t){let n=Object.getPrototypeOf(e??{}),i=Object.getOwnPropertyDescriptor(n,`metrics`)?.get;throw i&&Error.captureStackTrace&&Error.captureStackTrace(t,i),r(t)}function r(e,t=[]){if(!e.stack)return;let n=e.stack.split(`
`),r=n[0],i=n.slice(1),a=[/@giodev\/logger/,/node_modules/,/node:internal/,/internal\/modules/,/ModuleJob\.run/,/asyncRunEntryPointWithESMLoader/,...t],o=i.filter(e=>!a.some(t=>t.test(e)));return e.stack=[r,o[0]??i[0],...o.slice(1)].join(`
`),e}function i(e,t,r){return n(e,new f(`Unable to initialize Intl.DateTimeFormat${t?` for locale "${t.toString()}"`:``}: ${p(r)}`,`FORMATTER_INTL_UNAVAILABLE`,1))}var a,o,s,c,l,u,d,f,p,m,h,g,_=e((()=>{a=e=>t=>`\x1B[${e}m${t}\x1B[0m`,o={black:a(30),red:a(31),green:a(32),yellow:a(33),blue:a(34),magenta:a(35),cyan:a(36),white:a(37),brightRed:a(91),brightGreen:a(92),brightYellow:a(93),brightBlue:a(94),brightMagenta:a(95),brightCyan:a(96),brightWhite:a(97),bold:a(1),dim:a(2),italic:a(3),underline:a(4),inverse:a(7)},s=e=>e,c={0:e=>o.bold(o.brightRed(e)),1:e=>o.brightRed(e),2:e=>o.red(e),3:e=>o.brightMagenta(e),4:e=>o.yellow(e),5:e=>o.brightCyan(e),6:e=>o.cyan(e),7:e=>o.italic(e),8:s},l={...c,emergency:c[0],alert:c[1],critical:c[2],error:c[3],warn:c[4],notice:c[5],info:c[6],debug:c[7]},u=Object.freeze(l),d=class extends Error{code;constructor(e){super(e),this.name=this.constructor.name}},f=class extends d{constructor(e,t=`Formatter Error`,n=0){super(e),this.code=t,this.name=this.constructor.name,this.status+=n}status=90},p=e=>e instanceof Error?e.message:typeof e==`string`?e:JSON.stringify(e),m={true:[{icon:`ðŸ†˜ `,label:`EMERGENCY`},{icon:`ðŸš¨ `,label:`ALERT`},{icon:`ðŸ”¥ `,label:`CRITICAL`},{icon:`â›”ï¸ `,label:`ERROR`},{icon:`âš ï¸ â€Ž `,label:`WARN`},{icon:`ðŸ“£`,label:`NOTICE`},{icon:`â„¹ï¸ â€Ž `,label:`INFO`},{icon:`ðŸž `,label:`DEBUG`}],false:[{icon:`[!]`,label:`EMERGENCY`},{icon:`[!]`,label:`ALERT`},{icon:`[!]`,label:`CRITICAL`},{icon:`[X]`,label:`ERROR`},{icon:`[!]`,label:`WARN`},{icon:`[i]`,label:`NOTICE`},{icon:`[i]`,label:`INFO`},{icon:`[â€¢]`,label:`DEBUG`}]},h={icon:``,label:`LOG`},g=class e{dateFormatter;useColor;titles;constructor(t={}){let n=t.withEmojis??!1;this.useColor=t.color??!1,this.titles=m[n?`true`:`false`];try{this.dateFormatter=new Intl.DateTimeFormat(t.localeDate,{dateStyle:`short`,timeStyle:`medium`})}catch(n){i(e,t.localeDate,n)}}format(e){let t=`#${String(e.id).padStart(5,`0`)}`,n=this.titles[e.level]??h,r=n.icon?`${n.icon}${n.label}`:n.label,i=this.dateFormatter.format(e.timeStamp);return`${`${this.colorize(e.level)(`${t}-${r}(${e.subject}):`)}`} ${`${e.message} - ${i}`}`}colorize(e){return u[this.useColor?e:8]??u[8]}}})),v,y=e((()=>{_(),v=class{constructor(e=`log-transport`,t,n=!0){this.name=e,this.enabled=n,this.formatter=t?.formatter??new g(t?.defaultFormaterOptions)}formatter;emit(e){this.enabled&&this.shouldEmit(e)&&this.performEmit(e)}enable(){this.enabled=!0}disable(){this.enabled=!1}get transportName(){return this.name}shouldEmit(e){return!0}}}));function b(e,t){return n(e,new w(`ConsoleTransport requires a console implementation with stderr/stdout helpers.${t&&t.length>0?` Missing methods: ${t.join(`, `)}.`:``}`,`CONSOLE_UNAVAILABLE`,1))}var x,S,C,w,T,E=e((()=>{y(),_(),x=(e=>(e[e.emergency=0]=`emergency`,e[e.alert=1]=`alert`,e[e.critical=2]=`critical`,e[e.error=3]=`error`,e[e.warning=4]=`warning`,e[e.notice=5]=`notice`,e[e.informational=6]=`informational`,e[e.debug=7]=`debug`,e[e.info=6]=`info`,e))(x||{}),S=[[`emergency`,0],[`alert`,1],[`critical`,2],[`error`,3]],C=[[`warn`,4],[`notice`,5],[`info`,6],[`debug`,7]],w=class extends d{constructor(e,t=`ConsoleTransport Error`,n=0){super(e),this.code=t,this.name=this.constructor.name,this.status+=n}status=40},T=class e extends v{targetConsole;constructor(t){let n=typeof console<`u`?console:void 0,r=typeof n==`object`?[`error`,`warn`,`info`,`debug`].filter(e=>typeof n[e]!=`function`):[`error`,`warn`,`info`,`debug`];(!n||r.length>0)&&b(e,r),super(`console`,t),this.targetConsole=n}performEmit(e){let t=this.formatter.format(e),n=this.targetConsole;switch(e.level){case 0:case 1:case 2:case 3:n.error(t);break;case 4:n.warn(t);break;case 5:case 6:n.info(t);break;case 7:n.debug(t);break}}}}));function D(e,t){return n(e,new z(`Unsupported dispatcher mode "${t}". Expected "sync" or "reactive".`,`DISPATCHER_UNEXPECTED`,1))}function O(e,t,n,r){return t instanceof Error?t:new t(`(${e}) ${n?`- ${n}`:``}`.trim(),r)}function k(e){if(typeof e!=`function`)return!1;let t=e.prototype;return t?t===Error.prototype||Error.prototype.isPrototypeOf(t):!1}function A(e,t){t&&Error.captureStackTrace?.(e,t)}function j(e){return typeof e==`string`?e:e instanceof Error?e.stack??`${e.name}: ${e.message}`:e===void 0?`undefined`:e===null?`null`:typeof e==`number`||typeof e==`boolean`||typeof e==`bigint`||typeof e==`symbol`?String(e):typeof e==`function`?e.name?`[function ${e.name}]`:e.toString():typeof e==`object`?M(e):String(e)}function M(e){let t=new WeakSet;try{return JSON.stringify(e,(e,n)=>{if(typeof n==`bigint`||typeof n==`symbol`)return String(n);if(typeof n==`function`)return n.name?`[function ${n.name}]`:`[function]`;if(n&&typeof n==`object`){if(t.has(n))return`[Circular]`;t.add(n)}return n})??Object.prototype.toString.call(e)}catch{return Object.prototype.toString.call(e)}}function N(e){return n(e,new J(`You have to enable metrics to use them`,`METRICS_DISABLED`,1))}function P(e){return n(e,new J(` Callback function onUpdate failed`,`ON_UPDATE_CALLBACK_FAILED`,2))}var F,I,L,R,z,B,V,H,U,W,G,K,q,J,Y,X,Z=e((()=>{E(),_(),F=class{constructor(e,t,n){this.minLevel=t,this.metrics=n,this.transports=e.slice()}transports;get threshold(){return this.minLevel}emitToTransports(e){if(e.level>this.minLevel)return this.metrics?.recordFiltered(),!1;if(this.transports.length===0)return!1;let t=!1;for(let n of this.transports)try{n.emit(e)}catch{t=!0,this.metrics?.recordTransportError()}return this.metrics?.recordDispatched(),t}},I=class extends F{constructor(e,t=7,n){super(e,t,n)}dispatch(e){this.emitToTransports(e)}},L=typeof process<`u`&&!!process.versions?.node,R=class extends F{buffer=[];scheduled=!1;disposed=!1;flushInterval;idleTimeout;unrefTimers;schedule;timer;idleTimer;beforeExitHandler;port1;port2;constructor(e,t=7,n,r){super(e,t,r),this.flushInterval=n?.intervalMs??50,this.idleTimeout=n?.idleMs??5e3,this.unrefTimers=n?.unrefTimers??!0,this.schedule=(n?.useMessageChannel??(!L&&typeof MessageChannel<`u`))&&typeof MessageChannel<`u`?this.createChannelScheduler():this.createTimerScheduler(),L&&typeof process?.on==`function`&&(n?.hookBeforeExit??!0)&&(this.beforeExitHandler=()=>{this.flush(),this.dispose()},process.on(`beforeExit`,this.beforeExitHandler))}dispatch(e){if(!(this.disposed||this.transports.length===0)){if(e.level>this.minLevel){this.metrics?.recordFiltered();return}this.buffer.push(e),this.schedule(),this.resetIdleTimer()}}drain(){this.flush()}flush(){if(this.scheduled=!1,this.disposed||this.buffer.length===0)return;let e=this.buffer.splice(0);for(let t of e)this.emitToTransports(t);this.resetIdleTimer()}dispose(){this.disposed||(this.disposed=!0,this.scheduled=!1,this.buffer.length=0,this.timer&&=(clearTimeout(this.timer),void 0),this.idleTimer&&=(clearTimeout(this.idleTimer),void 0),this.port1&&=(this.port1.onmessage=null,this.port1.close(),void 0),this.port2&&=(this.port2.close(),void 0),L&&this.beforeExitHandler&&(typeof process?.off==`function`?process.off(`beforeExit`,this.beforeExitHandler):typeof process?.removeListener==`function`&&process.removeListener(`beforeExit`,this.beforeExitHandler),this.beforeExitHandler=void 0))}resetIdleTimer(){this.disposed||(this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=setTimeout(()=>this.dispose(),this.idleTimeout),this.maybeUnref(this.idleTimer))}createChannelScheduler(){let e=new MessageChannel;return this.port1=e.port1,this.port2=e.port2,this.port1.onmessage=()=>this.flush(),()=>{this.scheduled||this.disposed||(this.scheduled=!0,this.port2?.postMessage(0))}}createTimerScheduler(){return()=>{this.scheduled||this.disposed||(this.scheduled=!0,this.timer=setTimeout(()=>this.flush(),this.flushInterval),this.maybeUnref(this.timer))}}maybeUnref(e){if(!L||!this.unrefTimers||!e)return;let t=e.unref;typeof t==`function`&&t.call(e)}},z=class extends d{constructor(e,t=`Dispatcher Error`,n=0){super(e),this.code=t,this.name=this.constructor.name,this.status+=n}status=40},B={sync:(e,t,n)=>new I(e,t,n),reactive:(e,t,n)=>new R(e,t,void 0,n)},V=e=>e===`sync`||e===`reactive`,H=e=>{let t=e??`sync`,n=t.toString().toLowerCase();if(V(n))return n;D(void 0,t)},U={console:()=>new T,"console-emoji":()=>new T({defaultFormaterOptions:{withEmojis:!0}}),"console-color":()=>new T({defaultFormaterOptions:{color:!0}}),"console-styled":()=>new T({defaultFormaterOptions:{color:!0,withEmojis:!0}})},W=e=>typeof e!=`string`,G=class{static resolve(e){return Array.isArray(e)?this.resolveFromArray(e):typeof e==`string`?this.resolveFromMode(e):[e]}static resolveFromArray(e){let t=e.filter(W),n=new Set;for(let t of e)typeof t==`string`&&n.add(t);for(let e of n)t.push(...this.resolveFromMode(e));return t}static resolveFromMode(e){let t=U[e];return t?[t()]:[]}},K=e=>{if(typeof e==`string`)return e;let t=e?.constructor?.name;return typeof t==`string`&&t.length>0?t:`Unknown`},q=Object.freeze({built:0,dispatched:0,filtered:0,transportErrors:0,thrownErrors:0}),J=class extends d{constructor(e,t=`Logger Error`,n=0){super(e),this.code=t,this.name=this.constructor.name,this.status+=n}status=10},Y=[`console`],X=class e{constructor(e){this.options=e;let t=e?.minLevel??7,n=G.resolve(e?.transports??Y);this.hasTransport=n.length>0;let r=e?.metrics;this.isMetricsEnabled=typeof r!=`boolean`&&r?.enabled||typeof r==`boolean`&&r,this.callback=typeof r==`boolean`?void 0:r?.onUpdate,this.metricsState={built:0,dispatched:0,filtered:0,transportErrors:0,thrownErrors:0},this.metricsCollector={recordBuilt:()=>this.recordMetric(`built`),recordDispatched:()=>this.recordMetric(`dispatched`),recordFiltered:()=>this.recordMetric(`filtered`),recordTransportError:()=>this.recordMetric(`transportErrors`),recordThrown:()=>this.recordMetric(`thrownErrors`)},this.dispatcher=B[H(e?.dispatcher)](n,t,this.metricsCollector)}dispatcher;hasTransport;isMetricsEnabled;callback;metricsState;metricsCollector;counterID=0;get metrics(){if(this.isMetricsEnabled)return this.snapshotMetrics();N(this)}for(e){let t=K(e);return this.createContextLogger(t)}emergency(t,n,r,i){return this.handleErrorLevel(0,t,n,r,i,e.prototype.emergency)}alert(t,n,r,i){return this.handleErrorLevel(1,t,n,r,i,e.prototype.alert)}critical(t,n,r,i){return this.handleErrorLevel(2,t,n,r,i,e.prototype.critical)}error(t,n,r,i){return this.handleErrorLevel(3,t,n,r,i,e.prototype.error)}warn(e,t){return this.emit(4,e,t)}notice(e,t){return this.emit(5,e,t)}info(e,t){return this.emit(6,e,t)}debug(e,t){return this.emit(7,e,t)}build(e,t,n){return{id:++this.counterID,level:e,subject:t,message:n,timeStamp:Date.now()}}emit(e,t,n){this.metricsCollector?.recordBuilt();let r=this.build(e,t,j(n));return this.hasTransport&&this.dispatcher.dispatch(r),r}recordMetric(e){if(!this.metricsState)return;this.metricsState[e]+=1;let t=this.callback;try{t&&t(this.snapshotMetrics())}catch{P(this)}}snapshotMetrics(){if(!this.metricsState)return q;let{built:e,dispatched:t,filtered:n,transportErrors:r,thrownErrors:i}=this.metricsState;return{built:e,dispatched:t,filtered:n,transportErrors:r,thrownErrors:i}}createContextLogger(e){let t={};for(let[n,r]of S)t[n]=this.createErrorHandler(r,e);for(let[n,r]of C)t[n]=t=>this.emit(r,e,t);return t.metrics=()=>this.metrics,Object.freeze(t)}createErrorHandler(e,t){let n=((r,i,a)=>this.handleErrorLevel(e,t,r,i,a,n));return n}handleErrorLevel(e,t,n,r,i,a){if(e>this.dispatcher.threshold)return this.emit(e,t,n);if(n instanceof Error)throw this.metricsCollector?.recordThrown(),A(n,a),n;if(k(n)){let e=O(t,n,r===void 0?void 0:j(r),i);throw this.metricsCollector?.recordThrown(),A(e,a),e}return this.emit(e,t,n)}}})),Q,$=e((()=>{y(),Q=class extends v{_logs=[];maxBufferSize;get logs(){return this._logs}constructor(e={}){super(`memory`,e),this.maxBufferSize=e.maxBufferSize}clear(){this._logs.length!==0&&(this._logs.length=0)}snapshot(){return[...this._logs]}performEmit(e){let t=this.formatter.format(e);this._logs.push(t),this.maxBufferSize&&this._logs.length>this.maxBufferSize&&this._logs.shift()}}}));t((()=>{Z(),$();var e=new Q({maxBufferSize:30}),t=[e,`console-styled`],n=f(x.debug),r=n.for(`UI`),i=document.getElementById(`metrics`),a=document.getElementById(`logs`),o=document.getElementById(`min-level`),s=document.getElementById(`min-level-pill`),c=document.getElementById(`toasts`),l={[x.emergency]:`#ff4d4f`,[x.alert]:`#ff4d4f`,[x.critical]:`#ef4444`,[x.error]:`#d946ef`,[x.warning]:`#facc15`,[x.notice]:`#38bdf8`,[x.informational]:`#22d3ee`,[x.debug]:`#94a3b8`},u=[{key:`debug`,value:x.debug,label:`Debug`},{key:`informational`,value:x.informational,label:`Info`},{key:`notice`,value:x.notice,label:`Notice`},{key:`warning`,value:x.warning,label:`Warning`},{key:`error`,value:x.error,label:`Error`},{key:`critical`,value:x.critical,label:`Critical`},{key:`alert`,value:x.alert,label:`Alert`},{key:`emergency`,value:x.emergency,label:`Emergency`}];document.getElementById(`btn-emergency`).addEventListener(`click`,()=>{try{r.emergency(Error(`Emergency thrown from UI`))}catch(e){throw h(`Emergency threw (expected demo): ${e.message}`),e}}),document.getElementById(`btn-alert`).addEventListener(`click`,()=>{try{r.alert(Error(`Alert level thrown from UI`))}catch(e){throw h(`Alert threw (expected demo): ${e.message}`),e}}),document.getElementById(`btn-critical`).addEventListener(`click`,()=>{try{r.critical(Error(`Critical issue thrown from UI`))}catch(e){throw h(`Critical threw (expected demo): ${e.message}`),e}}),document.getElementById(`btn-emergency-msg`).addEventListener(`click`,()=>{r.emergency(`Emergency message (no throw)`)}),document.getElementById(`btn-alert-msg`).addEventListener(`click`,()=>{r.alert(`Alert message (no throw)`)}),document.getElementById(`btn-critical-msg`).addEventListener(`click`,()=>{r.critical(`Critical message (no throw)`)}),document.getElementById(`btn-error`).addEventListener(`click`,()=>{r.error(`Non-throwing error log for demo purposes`)}),document.getElementById(`btn-error-throw`).addEventListener(`click`,()=>{try{r.error(Error(`This one throws and gets caught`))}catch(e){throw h(`Error threw (expected demo): ${e.message}`),e}}),document.getElementById(`btn-warn`).addEventListener(`click`,()=>{r.warn(`Potential degradation detected in the UI`)}),document.getElementById(`btn-notice`).addEventListener(`click`,()=>{r.notice({type:`notice`,time:Date.now()})}),document.getElementById(`btn-info`).addEventListener(`click`,()=>{r.info(`User clicked "Info"`)}),document.getElementById(`btn-debug`).addEventListener(`click`,()=>{r.debug({feature:`search`,payload:{q:`logger`,filters:[`docs`,`issues`]}})}),o.addEventListener(`change`,()=>{let e=o.value,t=u.find(t=>t.key===e);d(t?.value??x.debug,t?.label??`Debug`)});function d(t,a){n=f(t),r=n.for(`UI`),e.clear(),i.textContent=`No events yet.`,s&&(s.querySelector(`strong`).textContent=a??`Debug`),m()}function f(e){return new X({minLevel:e,transports:t,dispatcher:`sync`,metrics:{enabled:!0,onUpdate:e=>p(e)}})}function p(e){e&&(i.innerHTML=`
        <div class="pill"><span>built</span><strong>${e.built}</strong></div>
        <div class="pill"><span>dispatched</span><strong>${e.dispatched}</strong></div>
        <div class="pill"><span>filtered</span><strong>${e.filtered}</strong></div>
        <div class="pill"><span>thrown</span><strong>${e.thrownErrors}</strong></div>
        <div class="pill"><span>transportErrors</span><strong>${e.transportErrors}</strong></div>
    `,m())}function m(){let t=e.snapshot();a.textContent=t.length===0?`No logs in MemoryTransport yet.`:t.join(`

`)}function h(e){if(!c)return;let t=document.createElement(`div`);t.className=`toast`,t.innerHTML=`<strong>Thrown</strong><span>${e}</span>`,c.appendChild(t),window.setTimeout(()=>t.remove(),3800)}function g(){let e={"btn-emergency-msg":x.emergency,"btn-alert-msg":x.alert,"btn-critical-msg":x.critical,"btn-error":x.error,"btn-warn":x.warning,"btn-notice":x.notice,"btn-info":x.informational,"btn-debug":x.debug};for(let[t,n]of Object.entries(e)){let e=document.getElementById(t);if(!e)continue;let r=l[n]??`#e2e8f0`;e.style.borderColor=r,e.style.color=r}}m(),g()}))()}))();